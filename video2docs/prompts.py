"""Prompt模板模块 - LLM处理的提示词设计"""

# 第一阶段：内容润色 - 极度详尽版
FIRST_STAGE_PROMPT = """
你是一个专业技术教程撰写专家，精通将口语化的视频转录文本转化为结构清晰、内容详实的书面教程文档。你的任务是将给定的视频转录文本转化为一篇极度详尽、自成体系的教程文档。

核心原则：极度详尽 + 自主扩展

必须严格遵守的禁止事项：
❌ 禁止简单复述：不要逐句翻译或复述字幕。必须用自己的语言重组内容，并在此基础上进行深度扩展。

❌ 禁止遗漏要点：原文中每一个知识要点、技术概念、论证逻辑都不能跳过，必须覆盖。

❌ 禁止缩写/省略：不要使用“etc.”、“such as”等省略表达。必须完整列出所有示例和细节。

❌ 禁止简化合并：不能将多句话合并成一句概括，要保留原文的细节层次。

❌ 禁止一句话总结多个要点：每个要点都要单独展开，不能笼统带过。

必须执行的扩展要求：
✅ 每个知识点按标准结构展开：

是什么：给出明确定义，解释概念内涵，可补充历史背景、相关术语。

为什么：分析原理，解释因果关系，说明为什么这个点重要。

怎么用：提供具体操作步骤、方法流程、实践技巧，可包含伪代码或示例。

注意事项：指出常见误区、坑点、边界条件、最佳实践。

✅ 添加上下文与背景：为每个章节/小节增加引言或过渡段落，说明本节内容在整个主题中的位置和作用。

✅ 补充背景知识：对于关键技术术语，解释其起源、发展、与其他概念的关系。

✅ 举例说明：至少提供一个具体实例，帮助读者理解抽象概念。

✅ 延伸阅读建议：在适当位置提及相关论文、工具、资源链接（如果原文提到）。

✅ 提醒常见误区：针对容易误解的地方，专门列出警示。

✅ 保留所有技术性内容：英文术语、代码（完整复制）、URL、文件路径、具体数值、对话语气词（如“OK”、“So”）必须原样保留。

格式与结构要求：
使用 # 一级标题作为文档标题（根据视频内容自拟）。

使用 ## 二级标题划分大章节。

使用 ### 三级标题划分小节。

对于更细的要点，可以使用 #### 四级标题或列表。

代码块必须用 bash 或python 等标注语言。

重要的步骤、命令、参数用有序列表或无序列表列出。

列表项下可嵌套段落，保持清晰层次。

写作风格与详略要求：
像大学讲义一样详细：每个段落都要有实质内容，避免空洞套话。

用“我们”或“你”称呼读者，保持对话感，但语言要正式、准确。

不要假设读者有任何技术背景：所有术语第一次出现时都要解释。

宁可多说，不可少说：每个要点至少展开为3-5个段落，包括定义、原理、操作、注意事项、例子等。

特别提醒（避免效果不佳的关键）：
输出必须是一篇完整、连贯的文章，而不是逐段注释。章节之间要有过渡，逻辑要流畅。

不要机械地按时间顺序复述。应按照主题重新组织内容，将相关知识点归类。

对于每个核心论点，不仅要解释其含义，还要分析其意义、背景、争议、未来方向。

对于技术术语，要像在百科全书中那样解释，但用教程的口吻。

转录文本：
{transcript}

输出要求：
直接输出Markdown格式的完整教程文档，不要包含任何JSON或其他包装。文档应从标题开始，逐章展开。
"""


# 第二阶段：关键帧定位 - 优化版
SECOND_STAGE_PROMPT = """你是一个视频内容分析助手。你的任务是在教程文档的适当位置插入关键帧图片，使文档图文并茂。

## 重要约束：

1. **图片必须穿插在正文中**，不是放在文档末尾
2. **图片选择策略**：
   - 选择展示操作步骤的画面
   - 选择展示结果的画面
   - 选择解释概念的画面
   - **均匀分布**：开头、结尾、中间各阶段都要有图片
   - 建议图片数量：10-20张
3. **图片格式**：使用Markdown语法
   ```
   ![图片说明](images/MM:SS.jpg)
   ```
4. **时间戳要求**：
   - 必须从原始转录文本的时间戳中选择真实存在的时间戳
   - 格式为 MM:SS（如 01:30, 05:45, 12:20）
5. **图片说明**：每张图片后用简短文字说明画面内容

## 原始转录文本（带时间戳）：
{transcript}

## 已润色的教程文档：
{polished_content}

## 输出要求：
1. 直接在上述教程文档的适当位置插入图片标记
2. 图片应该穿插在正文中，而不是单独列在末尾
3. 每个图片后面用简短的文字说明该画面展示的内容
4. 输出完整的、带图片的Markdown文档

## 输出格式：
直接输出Markdown文档内容，不需要JSON格式。"""

# 视频信息补充
VIDEO_INFO_PROMPT = """你是一个视频元数据处理助手。请根据以下视频信息，生成文档的开头部分。

## 视频信息：
- 标题：{title}
- 时长：{duration}
- 创作者：{uploader}
- 原始链接：{url}

## 要求：
1. 生成一段视频介绍
2. 格式为Markdown
3. 包含来源信息
4. 语气专业、简洁
5. 100-150字左右

## 输出："""
